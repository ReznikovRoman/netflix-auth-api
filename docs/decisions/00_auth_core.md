# Основной функционал

## Решения
- Реализация проверки прав пользователей для конкретных эндпоинтов
  - АПИ `/api/v1/roles/` - приватное
  - Проверка прав и выдача CLIENT_ID/CLIENT_SECRET осуществляется с помощью стороннего сервиса
  [auth0](https://auth0.com/blog/build-and-secure-fastapi-server-with-auth0/)
- Что хранить в jwt payload?
  - Базовая информация (дата выдача, ttl, и т.д.)
  - ID в системе Netflix Auth
  - Логин (email)
  - Список прав
- Как можно использовать pydantic для валидации входных параметров?
  - Используем библиотеку [flask-pydantic](https://github.com/bauerji/flask-pydantic)
- Как правильно называть эндпоинты?
  - Описание АПИ есть в [index.md](../index.md)
- Как реализовать единую фиксированную структуру ответов?
  - Формат успешного ответа
  - ```json
    {
      "data": {
        "id": 1,
        "title": "xxx"
      }
    }
    ```
  - Формат ответа с ошибкой
  - ```json
    {
      "error": {
        "code": "error_slug",
        "message": "xxx"
      }
    }
    ```
- Как понять, что эндпоинт спроектирован неудачно?
  - ...
- Как именно хранить токены с истекшим сроком годности?
  - Храним токены в Redis
  - При авторизации проверяем, что данный токен не находится в Redis
- Как получать токены из ответа? Body VS Headers
  - Токены авторизации передаем в заголовке Authorization
- Как передавать логин/пароль пользователя для выдачи токенов?
  - В метод `POST /api/v1/auth/login` передаем логин и пароль
